#include <stdio.h>
#include <malloc.h>

char *csplit(char string[])
{
    int i = 0;
    int nPointer = 0;
    int nSize = 0;
    while(string[i])
    {
        if(string[i] != ' ')
        {
            if(i == nPointer + nSize)
            {
                nSize++;
            }
            else
            {
                nPointer = i;
                nSize = 1;
            }
        }
        else
        {
            if(nPointer != 0)
            {
                if(nSize != 0) 
                {
                    char *temparray = malloc((nSize + 1) * sizeof(char));
                    if(temparray == NULL)
                    {
                        printf("Failed to allocate memory\n");
                        return NULL;
                    }
                    for(int j = 0; j < nSize; j++)
                    {
                        temparray[j] = string[nPointer + j];
                    }
                    temparray[nSize] = '\0'; // add null terminator
                    return temparray;
                }
            }
            nPointer = 0;
            nSize = 0;
        }
        i++;
    }
    return NULL;
}


int main()
{
    char string[] = " hello lol zzz";
    char *array = csplit(string);
    printf("%s\n", array);
    //test for each character in the array
    /*for(int i = 0; i < 6 ;i++)
    {
        printf("%d\n", array[i]);
    }
    */
    free(array);
    return 0;
}
