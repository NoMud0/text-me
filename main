#include <stdio.h>
#include <malloc.h>

char *copyToken(char *string, int pointer, int size)
{
    char *temparray = malloc((size + 1) * sizeof(char));
    if(temparray == NULL)
    {
        printf("Failed to allocate memory\n");
        return NULL;
    }
    for(int j = 0; j < size; j++)
    {
        temparray[j] = string[pointer + j];
    }
    temparray[size] = '\0'; // add null terminator
    return temparray;
}

char *csplit(char string[])
{
    int i = 0;
    int nPointer = 0;
    int nSize = 0;
    while(string[i])
    {
        if(string[i] == ' ')
        {
            if(nSize != 0) 
            {
                char *Token = copyToken(string, nPointer, nSize);
                return Token;
            }
            nPointer = 0;
            nSize = 0;
        }
        else
        {
            if(i == nPointer + nSize)
            {
                nSize++;
            }
            else
            {
                nPointer = i;
                nSize = 1;
            }
        }
        i++;
    }
    return NULL;
}


int main()
{
    char string[] = "hello lol zzz";
    char *array = csplit(string);
    printf("%s\n", array);
    //test for each character in the array
    /*for(int i = 0; i < 6 ;i++)
    {
        printf("%d\n", array[i]);
    }
    */
    free(array);
    return 0;
}
